#!/bin/bash

ScriptPath=`unset CDPATH && cd "$(dirname ${BASH_SOURCE[0]})" >/dev/null && pwd`
ScriptName=`basename ${BASH_SOURCE[0]}`

_show_help() {
	cat >&2 << EOF
USAGE: ${ScriptName} [-h] [arguments...]
OPTIONS
	-h	show this message
ARGUMENTS
	list of script names to create
EOF
}

OPTIND= OPTARG= opt=
while getopts "h" opt; do
	if [ "-" = "${OPTARG:0:1}" ]; then
		echo "${ScriptName}: option requires an argument -- $opt" >&2
		opt=?
	fi
	case $opt in
	h)	_show_help; exit
		;;
	?)	_show_help; exit 1
		;;
	esac
done

shift $((OPTIND-1))

_create() {
	if [ -e "$1" ]; then
		echo "[Error] $1 already exists!!" >&2
		exit 1
	fi

	exec < ${BASH_SOURCE[0]}

	lineno=0
	while read; do
		lineno=$((lineno+1))
		if [ 12 -eq $lineno ]; then
			echo "	(argument descriptions)" >> $1
			continue
		fi
		if [ 31 -lt $lineno ]; then
			break
		fi
		echo "$REPLY" >> $1
	done
	chmod +x $1
}

while [ 0 -lt $# ]; do
	_create $1
	shift
done
